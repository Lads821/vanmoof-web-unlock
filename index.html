<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ VanMoof + –°–∫–æ—Ä–æ—Å—Ç—å</title>
  <script src="https://cdn.jsdelivr.net/npm/vanbike-lib/dist/vanbike-lib.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    input, button, select { margin: 10px; padding: 8px; }
    #log { text-align: left; margin: 20px auto; max-width: 500px; background: #eee; padding: 10px; border-radius: 6px; white-space: pre-wrap; }
  </style>
</head>
<body>

<h2>üîí –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ VanMoof + –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏</h2>

<input type="text" id="unlockKey" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏">
<br>
<button id="btnUnlock">üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
<button id="btn25">üö≤ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç 25 –∫–º/—á</button>
<button id="btn32">üéì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç 32 –∫–º/—á</button>

<div id="log"></div>

<script>
const logDiv = document.getElementById('log');
function log(msg) {
  const time = new Date().toLocaleTimeString();
  logDiv.textContent += `\n[${time}] ${msg}`;
  logDiv.scrollTop = logDiv.scrollHeight;
}

let service = null;

async function connectAndPrepare() {
  const key = document.getElementById('unlockKey').value.trim();
  if (!key) return log('‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏');
  const profile = new vanbikeLib.ElectrifiedSX1Profile();
  service = new vanbikeLib.VanBikeService(profile, key);
  const bike = await service.requestDevice();
  await bike.connect();
  return bike;
}

btnUnlock.onclick = async () => {
  try {
    log('üîç –ü–æ–∏—Å–∫ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞...');
    const bike = await connectAndPrepare();
    log('‚úÖ –í–µ–ª–æ—Å–∏–ø–µ–¥ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!');
    await bike.disconnect();
  } catch (e) {
    log('‚ùå ' + e);
  }
};

btn25.onclick = async () => {
  try {
    log('‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–º–∏—Ç–∞ 25 –∫–º/—á...');
    const bike = await connectAndPrepare();
    await service.setRegion('EU');
    log('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–π –ª–∏–º–∏—Ç 25 –∫–º/—á');
    await bike.disconnect();
  } catch (e) {
    log('‚ùå ' + e);
  }
};

btn32.onclick = async () => {
  try {
    log('üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–º–∏—Ç–∞ 32 –∫–º/—á...');
    const bike = await connectAndPrepare();
    await service.setRegion('US');
    log('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç 32 –∫–º/—á (–°–®–ê)');
    await bike.disconnect();
  } catch (e) {
    log('‚ùå ' + e);
  }
};
</script>

</body>
</html>





