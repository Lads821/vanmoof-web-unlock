<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ VanMoof + –°–∫–æ—Ä–æ—Å—Ç—å</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f8f8f8;
      padding: 1em;
      color: #333;
    }
    input, select, button {
      padding: 0.5em;
      margin: 0.5em 0;
      font-size: 1em;
    }
    #log {
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
      white-space: pre-wrap;
      font-family: monospace;
    }
    button {
      cursor: pointer;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/gh/Poket-Jony/vanbike-lib/dist/vanbike-lib.js"></script>
</head>
<body>
  <h2>üîí –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ VanMoof + –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏</h2>

  <input id="unlockCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏" style="width: 100%;" />
  <br>
  <button onclick="unlockBike()">üîí –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
  <button onclick="setSpeedLimit(25)">üö¥Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç 25 –∫–º/—á</button>
  <button onclick="setSpeedLimit(32)">üèéÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç 32 –∫–º/—á</button>

  <div id="log"></div>

  <script>
    const log = msg => {
      const area = document.getElementById("log");
      const time = new Date().toLocaleTimeString();
      area.textContent += `\n[${time}] ${msg}`;
      area.scrollTop = area.scrollHeight;
    };

    let bike;

    async function unlockBike() {
      const code = document.getElementById("unlockCode").value.trim();
      if (!code) return log("\u274c –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥!");

      log("\uD83D\uDD0D \u041F\u043E\u0438\u0441\u043A –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞...");
      try {
        bike = await Vanbike.discover();
        log(`\uD83D\uDD17 \u041F\u043E–¥–∫–ª\u044E\u0447\u0435–Ω–∏–µ –∫ ${bike.name}...`);
        await bike.connect();
        await bike.unlock(code);
        log("‚úÖ –í–µ–ª–æ—Å–∏–ø–µ–¥ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!");
      } catch (e) {
        log(`‚ùå \u041E—à–∏–±–∫–∞: ${e.message}`);
      }
    }

    async function setSpeedLimit(kph) {
      if (!bike || !bike.isConnected()) {
        log("‚ùå \u0412–µ–ª–æ—Å–∏–ø–µ–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω.");
        return;
      }
      try {
        await bike.setSpeedLimit(kph);
        log(`‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç: ${kph} –∫–º/—á`);
      } catch (e) {
        log(`‚ùå \u041E—à–∏–±–∫–∞: ${e.message}`);
      }
    }
  </script>
</body>
</html>





